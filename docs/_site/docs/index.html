<!DOCTYPE html>
<html lang="en-us" class="h-100">
  <head>
    <title>
      verbosemanager – verbose management of complex processes
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The page supports both dark and light color schemes, and the page author prefers / default is light. -->
    <meta name="color-scheme" content="dark light" />
    <!-- Stylesheet that includes Bootstrap dark mode & custom stylesheet -->
    <link
      rel="stylesheet"
      href="/assets/css/styles.css"
    />
    <link rel="icon" href="/assets/images/favicon.ico" />
    <!-- Meta Theme Color is also supported on Safari and Chrome -->
    <meta
      name="theme-color"
      content="#eeeeee"
      media="(prefers-color-scheme: dark)"
    />
    <meta
      name="theme-color"
      content="#111111"
      media="(prefers-color-scheme: light)"
    />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>verbosemanager | simple Python module for verbose management of complex processes</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="verbosemanager" />
<meta name="author" content="andrew-park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="verbose management of complex processes" />
<meta property="og:description" content="verbose management of complex processes" />
<link rel="canonical" href="http://localhost:4000/docs/" />
<meta property="og:url" content="http://localhost:4000/docs/" />
<meta property="og:site_name" content="verbosemanager" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="verbosemanager" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"verbosemanager","url":"http://localhost:4000/docs/","author":{"@type":"Person","name":"andrew-park"},"description":"verbose management of complex processes","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
 <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="verbosemanager" /></head>
  <body class="d-flex flex-column h-100">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">
    <a class="navbar-brand p-0" href="/">
    
      verbosemanager</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        
          <li class="nav-item">
            <a href="/"  class="nav-link" >Home</a>
          </li>
        
          <li class="nav-item">
            <a href="/about/"  class="nav-link" >About</a>
          </li>
        
          <li class="nav-item">
            <a href="/docs/"  class="nav-link active" >Documentation</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

      <div class="body"><h1 id="documentation">documentation</h1>

<p>API reference available <a href="{site.baseurl}/docs/api/">here</a>.</p>

<h2 id="basic-process-management">Basic process management</h2>

<p>For a simple process with no sub-functions (or at least, none that would
require their own verbose handling), <code class="language-plaintext highlighter-rouge">VerboseManager</code> handles management
like so:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">verbose</span><span class="p">):</span>
    <span class="n">verbose_manager</span> <span class="o">=</span> <span class="n">VerboseManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="c1"># initialisation goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Step 1"</span><span class="p">)</span>
    <span class="c1"># step 1 code goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Step 2"</span><span class="p">)</span>
    <span class="c1"># step 2 code goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">finish</span><span class="p">(</span><span class="s">"Process"</span><span class="p">)</span>
</code></pre></div></div>

<p>Note that <code class="language-plaintext highlighter-rouge">VerboseManager</code> must be instantiated using
<code class="language-plaintext highlighter-rouge">VerboseManager.instance()</code>; trying to instantiate it using
<code class="language-plaintext highlighter-rouge">VerboseManager()</code> will throw a runtime error. The reason for this is because <code class="language-plaintext highlighter-rouge">VerboseManager</code> is a Singleton class - no matter where you instantiate it, it gives you the same single <code class="language-plaintext highlighter-rouge">VerboseManager</code> object. This is how it manages to track its way through subprocesses etc.</p>

<p>To start the process for <code class="language-plaintext highlighter-rouge">VerboseManager</code> instance <code class="language-plaintext highlighter-rouge">verbose_manager</code>, we
use <code class="language-plaintext highlighter-rouge">verbose_manager.start(n_steps, verbose)</code>. This takes two arguments.
<code class="language-plaintext highlighter-rouge">n_steps</code> is the number of steps the process involves - see in the
example, this is 2 as the step method is called two times. Sadly, this
must be calculated manually; this is unavoidable, as Python is not a
compiled language. The second parameter is <code class="language-plaintext highlighter-rouge">verbose</code>, which gives
the verbosity level for the process. The levels are like so:</p>

<ul>
  <li>
    <p>Verbosity 0: no output is given. This is here to save processes from
having to include a "<code class="language-plaintext highlighter-rouge">if verbosity&gt;0; verbose_manager.start()</code>"
block - if verbosity is 0, the manager is called and ignored
entirely.</p>
  </li>
  <li>
    <p>Verbosity 1; no output is given during the process, but when a
process finishes, the time taken for the whole process is printed,
and the time taken for a process and all its subprocesses is
returned as a variable when each process finishes.</p>
  </li>
  <li>
    <p>Verbosity 2; the features of verbosity 1, and additionally and
additionally at each step a timing is given next to the progress bar
with how long the previous step took; at the end of the process, a
list of timings for each step is printed.</p>
  </li>
  <li>
    <p>Verbosity 3; the features of verbosity 1 and 2, and additionally a
progress bar is given with progress percentage and a message for
each step.</p>
  </li>
</ul>

<p>After starting, we can advance verbose printing for the process using
the method <code class="language-plaintext highlighter-rouge">verbose_manager.step(message)</code>. This advances the process by
one step, increasing the progress bar and also giving the <code class="language-plaintext highlighter-rouge">message</code>
parameter as a message next to it. This message should describe what
the current step is doing.</p>

<p>When the process is done, verbose management can be completed using
<code class="language-plaintext highlighter-rouge">verbose_manager.finish(process_name)</code>. This will end verbose management
for the process (or subprocess). If it is a main process, time taken
will be printed and returned as a variable. If it is a subprocess, time
taken for the subprocess will be returned as a variable. <code class="language-plaintext highlighter-rouge">process_name</code>
is, of course, a string with the name of the process; final timings will
be printed in the format "[process_name] complete in [time]
seconds.". Note that if n_steps was set incorrectly, at this point
<code class="language-plaintext highlighter-rouge">VerboseManager</code> will throw a warning telling you how many steps it
actually took; if your process takes a fixed number of steps, you could
use this as a quick way of calculating n_steps.</p>

<p>At verbosity 3, the example given above would print the following at the
end of the process:</p>

<pre><code class="language-ansiwhite">[===============] 100% Complete
Process completed in [time] seconds.
Timings per step:
Initialisation: [time]
Step 1: [time]
Step 2: [time]
</code></pre>

<h2 id="subprocess-management">Subprocess management</h2>

<p>If a process involves sub-processes, like so:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">subprocess</span><span class="p">():</span>
    <span class="c1"># subprocess goes here
</span>    
<span class="k">def</span> <span class="nf">process</span><span class="p">():</span>
    <span class="c1"># initialisation goes here
</span>    <span class="c1"># process code goes here
</span>    <span class="n">subprocess</span><span class="p">()</span>
    <span class="c1"># more process code goes here
</span></code></pre></div></div>

<p>it is incredibly easy to add the subprocess to <code class="language-plaintext highlighter-rouge">VerboseManager</code>’s
subprocess management. You simply do the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">subprocess</span><span class="p">():</span>
    <span class="n">verbose_manager</span> <span class="o">=</span> <span class="n">VerboseManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Subprocess step"</span><span class="p">)</span>
    <span class="c1"># subprocess goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">finish</span><span class="p">(</span><span class="s">"Subprocess"</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">process</span><span class="p">():</span>
    <span class="n">verbose_manager</span> <span class="o">=</span> <span class="n">VerboseManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
    <span class="c1"># initialisation goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Step 1"</span><span class="p">)</span>
    <span class="c1"># step 1 code goes here
</span>    <span class="n">subprocess</span><span class="p">()</span>
    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Step 2"</span><span class="p">)</span>
    <span class="c1"># step 2 code goes here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">finish</span><span class="p">(</span><span class="s">"Process"</span><span class="p">)</span>
</code></pre></div></div>

<p>that is, to add the subprocess we simply instantiate, start, step and
finish the exact same way as we do in the main process. <code class="language-plaintext highlighter-rouge">VerboseManager</code>
will recognise that a process is already being managed, and nest the
steps of the subprocess into it.</p>

<p>The only caveat is that <code class="language-plaintext highlighter-rouge">n_steps</code> in the outermost (main) process must
account for the steps contained in subprocesses. The <code class="language-plaintext highlighter-rouge">n_steps</code> in the
subprocess is ignored entirely (and would only be used if one was
directly calling the subprocess). This is for a reason; if we added the
subprocess steps to the main process’ management as we went, the
progress bar would be incorrect before subprocesses get factored in. At
step 1, it would say we were 50% complete, whereas in fact we have only
done 1 out of 3 steps, so we are in fact 33% complete. This error would
not be corrected until the subprocess starts, leading to weird and
inconsistent output. In fact, if a process had 2 steps and contained a
subprocess with 3 steps, the progress bar would go from 50% to 40% (1/2
to 2/5) when the subprocess starts.</p>

<p>This example would output like so at the end of the process on verbosity
3:</p>

<pre><code class="language-ansiwhite">[===============] 100% Complete
Process completed in [time] seconds.
Timings per step:
Initialisation: [time]
Step 1: [time]
|Subprocess step: [time]
Step 2: [time]
</code></pre>

<p>A vertical bar is used to denote the nesting level of subprocesses. As
an example of this, if the subprocess had multiple steps including its
own subprocess, and that sub-subprocess had its own subprocess, it would
nest like so:</p>

<pre><code class="language-ansiwhite">[===============] 100% Complete
Process completed in [time] seconds.
Timings per step:
Initialisation: [time]
Step 1: [time]
|Subprocess step 1: [time]
||Sub-subprocess step: [time]
|||Sub-sub-subprocess step: [time]
|Subprocess step 2: [time]
Step 2: [time]
</code></pre>

<p>We can also get timings for a whole subprocess as a return variable,
that is <code class="language-plaintext highlighter-rouge">timings = verbose_manager.finish("Subprocess")</code>. This will
return the time for the entire subprocess, regardless of how many steps
or sub-subprocesses it goes into. These subprocess timings are stored
simply as a stack; for each new subprocess, its start time is stored,
then retrieved and popped when that subprocess finishes.</p>

<p>The user can also use the method <code class="language-plaintext highlighter-rouge">verbose_manager.header(message)</code> to
add headers to parts of the final timings list. For example, if we
wanted to add a header to indicate the part of the code that was in the
subprocess, we could add to the previous example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">process</span><span class="p">():</span>
    <span class="c1"># initialisation etc here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="s">"Step 1"</span><span class="p">)</span>
    <span class="c1"># step 1 code here
</span>    <span class="n">verbose_manager</span><span class="p">.</span><span class="n">header</span><span class="p">(</span><span class="s">"Subprocess calculation"</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="p">()</span>
    <span class="c1"># etc...
</span></code></pre></div></div>

<p>which would print like so:</p>

<pre><code class="language-ansiwhite">[===============] 100% Complete
Process completed in [time] seconds.
Timings per step:
Initialisation: [time]
Step 1: [time]
Subprocess calculation:
|Subprocess step 1: [time]
||Sub-subprocess step: [time]
|||Sub-sub-subprocess step: [time]
|Subprocess step 2: [time]
Step 2: [time]
</code></pre>

<h2 id="the-verbosemanager-wrapper">The @verbosemanager wrapper</h2>
<p>The @verbosemanager wrapper is just a shortcut for the <code class="language-plaintext highlighter-rouge">start()</code> and <code class="language-plaintext highlighter-rouge">finish()</code> methods. Indeed:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">verbosemanager</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="o">**</span><span class="n">verbose</span><span class="p">)</span>
  <span class="n">verbose_manager</span> <span class="o">=</span> <span class="n">VerboseManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
  <span class="n">verbose_manager</span><span class="p">.</span><span class="n">step</span><span class="p">()</span>
  <span class="k">return</span>
</code></pre></div></div>

<p>just does the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">verbose_manager</span> <span class="o">=</span> <span class="n">VerboseManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
<span class="n">verbose_manager</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">kwargs</span><span class="p">(</span><span class="n">verbose</span><span class="p">)</span>
<span class="n">process</span><span class="p">()</span>
<span class="n">verbose_manager</span><span class="p">.</span><span class="n">finish</span><span class="p">(</span><span class="n">process</span><span class="p">)</span>
</code></pre></div></div>

<p>This makes it less flexible, as you cannot run anything before starting the verbose management, nor can you change the name of the process given when it finishes (<code class="language-plaintext highlighter-rouge">verbose_manager.finish</code> here just uses the name of the process it’s wrapped around), but it avoids busywork and easily-forgettable finish methods, as well as making your processes look cleaner.</p>

<p>Annoyingly, one still needs to re-instantiate the <code class="language-plaintext highlighter-rouge">VerboseManager</code> object in each function, as Python scoping does not let a function access objects created in a decorator attached to it.</p>
</div>
    </div>
    <footer class="footer mt-auto py-3">
  <div class="container footer-container">
<a class="footer-icon-links" href="mailto:alex.room@btinternet.com">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    fill="currentColor"
    class="bi bi-envelope-fill footer-icons"
    viewBox="0 0 16 16"
  >
    <path
      d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"
    />
  </svg>
</a>
    
<a
  class="footer-icon-links"
  href="https://github.com/alexhroom/verbosemanager"
  ><svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    fill="currentColor"
    class="bi bi-github footer-icons"
    viewBox="0 0 16 16"
  >
    <path
      d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
    /></svg
></a>
  
</div>
</footer>

    <!-- JS for Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
